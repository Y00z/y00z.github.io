---
layout: post
title: wifi破解之社工钓鱼
date: 2017-05-07 21:02:11
comments: true
tags:
	- 安全攻防
	- wifi破解
---


### 前言
><font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**文中提及的部分技术，可能带有一定攻击性，仅供安全学习和教学用途，禁止非法使用！**</font>

### 正文
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wifi有很多种方法，我在之前的文章中说过抓握手包破解，这里说一下社工钓鱼来破解得到wifi密码。<!--more-->

#### 攻击原理

 * 抓取握手包
 * 创建一个和目标wifi同名的ap热点，
 * 开启一个web服务，创建一个钓鱼的web页面，要求用户输入wifi密码
 * 模拟dns服务，把所有的请求都解析到自己的ip中
 * ddos目标ap，使用户连不上路由器
 * 用户连接不上wifi后就会自动连上我们的钓鱼wifi
 * 连上后就所有请求页面都会转到我们的钓鱼页面。
 * 用户输入wifi密码后通过抓取的握手包来匹配正确密码。


**这里我们使用Fluxion（当然也有相同的WiFiPhisher）来完成上述的过程**

### 安装

首先把程序下载到本地

	git clone https://github.com/FluxionNetwork/fluxion.git

首先进入install目录中运行install，会自动把依赖的软件包自动安装好。  **↓**

 ![](/images/pasted-106.jpg)

### 攻击

安装完毕之后就可以直接开启fluxion了。  **↓**

 ![](/images/pasted-107.jpg)

一开始选择语言，其中有中文，但是我还是建议使用英文的。

选择语言后来扫描指定ap的信道。 **↓**

 ![](/images/pasted-108.jpg)

第一个是扫描全部信道，第二个是扫描指定信道，我们选择扫描全部信道。

选择之后会自动开启一个小窗口来扫描ap，如果扫描到了我们要的ap就ctrl+c强制停止掉。   **↓**

 ![](/images/pasted-109.jpg)

停止扫描后会把刚刚我们扫描到的ap都显示出来，选择我们需要攻击的ap。    **↓**

 ![](/images/pasted-110.jpg)

然后选择攻击方式。   **↓**

![](/images/pasted-111.jpg)

第一个就是我上面说的伪装ap攻击。我们选第一个。

选择后我们需要设置保存握手包保存路径。  **↓**

![](/images/pasted-112.jpg)

我们可以选择默认路径，直接回车。

然后选择抓取握手包的方式。 **↓**

![](/images/pasted-113.jpg)

选择我们攻击ap的方式，第一个是使用默认aireplay来攻所有的客户端，第二个则是使用mdk3来攻击所有的客户端。

![](/images/pasted-114.jpg)

选择之后会同时开启2个小窗口，一个来ddos攻击ap，第二个来抓取握手包。  **↓**

![](/images/pasted-115.jpg)

如果抓取到握手包了右上角会有显示。 **↓**

![](/images/pasted-116.jpg)

这个时候可以直接关掉小窗口了，然后查看握手包。    **↓**

![](/images/pasted-117.jpg)

来创建一个ssl证书。**↓**

![](/images/pasted-118.jpg)

开启web服务。**↓**

![](/images/pasted-119.jpg)

选择路由器的登录界面，在我们国内使用的tp-link比较多，我们可以选择tp-link。 **↓**

![](/images/pasted-120.jpg)

完毕之后会同时开启4个窗口，一个dhcp来分配ip，一个用来监听连接进钓鱼ap的客户端，一个来把所有请求解析到本地，最后一个来ddos目标的wifi。 **↓**

![](/images/pasted-121.jpg)

这个时候的客户端呢，用户会连接不上原wifi，而会自动连上我们的钓鱼wifi，而且一连上wifi就会自动打开网页，进入我们的钓鱼页面。 **↓**

![](/images/Screenshot_2017-05-07-22-04-22.jpg)

同时浏览器也会提示用户登录wifi。  **↓**

![](/images/Screenshot_2017-05-07-22-04-16.jpg)

用户输入密码后，会根据抓到的握手包来匹配正确密码。 **↓**

![](/images/Screenshot_2017-05-07-22-05-20.jpg)

直到用户输入正确密码后，程序停止。

![](/images/Screenshot_2017-05-07-22-05-50.jpg)

![](/images/pasted-122.jpg)


### 末尾

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;另外破解wifi还有使用reaver来穷举pin码，只有ap开着wps，并且没有做防pin的处理，那么可以百分百破解得到密码。但是不知道是不是我这个网卡原因，一直pin失败，所有ap都是一样的。等我解决这个问题后再来发布关于pin码的文章好了。